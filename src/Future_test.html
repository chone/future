<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" href="">
  </head>
  <body>
    <script src="Future.js"></script>
    <script>
      var future = new Future();

      future.then(function(value) {
	console.log(value);	
	return value.replace('H', 'h');
      }).then(function(value) {
	console.log(value);
	var r = new Future();
	setTimeout(function() {
	  r._setError(Error('timeout'))
	}, 3000)
	return r;
      }).catchError(function(e) {
	console.log(e);
	throw Error('go final')
      }).catchError(function(e) {
	console.log(e)
	console.log('final')
	return 1;
      }).then(function(value) {
	console.log(value + 1)
      });

      future._setValue('Hello');
    </script>
  </body>
</html>

